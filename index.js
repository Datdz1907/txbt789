function _0x4dfd(){const _0x424fd7=['Tài','predict','listen','object','get','compile','500840NpdAry','Huấn\x20luyện\x20xong\x20với\x20dữ\x20liệu\x20hiện\x20tại:','json','2662797DxpmoX','env','relu','length','map','Tai','2356FOFpEY','6205580dLwLhT','match','dense','WebSocket\x20closed,\x20reconnecting\x20in\x205s...','/api/ketqua','taixiuMd5Plugin','add','\x20kết\x20quả\x20từ\x20pattern.txt\x20để\x20huấn\x20luyện.','split','send','push','Xỉu','layers','Cập\x20nhật\x20dữ\x20liệu:','Xiu','Join\x20room\x20taixiuMd5Plugin\x20sent','MiniGame','84968239523','pattern.txt','utf8','accuracy','42pOLIJS','Chưa\x20đủ\x20dữ\x20liệu\x20để\x20train','63qubQdV','48gWLdRN','syncho01','Chưa\x20đủ\x20dữ\x20liệu','11764cuGllE','parse','3635852vSLZwG','Thống\x20kê:\x20Tài\x20=\x20','API\x20server\x20running\x20at\x20http://localhost:','Đã\x20load\x20','slice','readFileSync','shift','Ledat1907@','455021ljqDFa','use','404aeINxY','binaryCrossentropy','close','log','0a86bd85-4d3e-45fe-8f6c-63b11182183e','tensor2d','1675HzqJpX','stringify','PORT','WebSocket\x20error:','adam','691e2414a8aa35421716e5b014f768fa'];_0x4dfd=function(){return _0x424fd7;};return _0x4dfd();}const _0x404a66=_0x42cc;(function(_0x4f25c5,_0x67de0e){const _0x112057=_0x42cc,_0xadd464=_0x4f25c5();while(!![]){try{const _0x4ae270=parseInt(_0x112057(0x1b0))/0x1*(parseInt(_0x112057(0x1cb))/0x2)+-parseInt(_0x112057(0x1c5))/0x3+-parseInt(_0x112057(0x1a4))/0x4*(parseInt(_0x112057(0x1b6))/0x5)+-parseInt(_0x112057(0x1e1))/0x6*(-parseInt(_0x112057(0x1ae))/0x7)+parseInt(_0x112057(0x1c2))/0x8*(-parseInt(_0x112057(0x1e3))/0x9)+parseInt(_0x112057(0x1cc))/0xa+parseInt(_0x112057(0x1a6))/0xb*(parseInt(_0x112057(0x1e4))/0xc);if(_0x4ae270===_0x67de0e)break;else _0xadd464['push'](_0xadd464['shift']());}catch(_0x414db1){_0xadd464['push'](_0xadd464['shift']());}}}(_0x4dfd,0x89576));import _0xfabcfc from'express';import _0x18db7c from'ws';import _0x42f114 from'cors';import _0x1ae555 from'fs';import*as _0x23fb9c from'@tensorflow/tfjs-node';const WS_URL='wss://api.apibit.net/websocket?d=YW5CaGJXeGthMjA9fDI0ODl8MTc1NDEzNzM4OTUwOHw5OWMwNGQ5Zjg4YmZhOTE5MjgxMDI5NDgxODdhMWZkZXwzM2U5OGVjMDRmYWU4MTY5MzBmYjZjMjk1NjQ5MjE5MQ==',HANDSHAKE=[0x1,'MiniGame',_0x404a66(0x1a2),_0x404a66(0x1ad),{'signature':'62AEDD3AB10F6AC303898BB1763937212B4BD5DB6B07BB1DC9281391282AAA2BFA79DB7423B5F707974CDB0F327C0B92FAE80796A2DE20FFDB578FEE1459861E5B417D99CE8B6F91EFBFC8A19511F4A248E598A3695190EF7F99E7140D5BF51A519119429DC0A38E644ED8C14423F39411D4CC88C675A8E3989144BCB1586C73','info':{'cs':_0x404a66(0x1bb),'phone':_0x404a66(0x1dd),'ipAddress':'42.118.191.0','isMerchant':![],'userId':_0x404a66(0x1b4),'deviceId':'250165605115165151486041589641432','isMktAccount':![],'username':_0x404a66(0x1a2),'timestamp':0x1986ab04599},'pid':0x4}],WINDOW=0x5;let lastResult=null,lichSuKetQua=[],thongKe={'Tai':0x0,'Xiu':0x0},model=null;function ketQuaToNumber(_0x49092c){const _0x5045f6=_0x404a66;return _0x49092c===_0x5045f6(0x1bc)?0x1:0x0;}function makeDataset(_0x27e0bc){const _0x9f62f1=_0x404a66,_0x1adb45=[],_0x11ba45=[];for(let _0x1c0801=0x0;_0x1c0801<=_0x27e0bc[_0x9f62f1(0x1c8)]-WINDOW-0x1;_0x1c0801++){_0x1adb45[_0x9f62f1(0x1d6)](_0x27e0bc['slice'](_0x1c0801,_0x1c0801+WINDOW)[_0x9f62f1(0x1c9)](_0x23077a=>_0x23077a==='T'?0x1:0x0)),_0x11ba45['push'](_0x27e0bc[_0x1c0801+WINDOW]==='T'?0x1:0x0);}return{'xs':_0x23fb9c[_0x9f62f1(0x1b5)](_0x1adb45),'ys':_0x23fb9c[_0x9f62f1(0x1b5)](_0x11ba45,[_0x11ba45[_0x9f62f1(0x1c8)],0x1])};}function createModel(){const _0x3bbe30=_0x404a66,_0x2c01e0=_0x23fb9c['sequential']();return _0x2c01e0[_0x3bbe30(0x1d2)](_0x23fb9c[_0x3bbe30(0x1d8)][_0x3bbe30(0x1ce)]({'units':0x10,'activation':_0x3bbe30(0x1c7),'inputShape':[WINDOW]})),_0x2c01e0['add'](_0x23fb9c[_0x3bbe30(0x1d8)][_0x3bbe30(0x1ce)]({'units':0x8,'activation':_0x3bbe30(0x1c7)})),_0x2c01e0[_0x3bbe30(0x1d2)](_0x23fb9c[_0x3bbe30(0x1d8)][_0x3bbe30(0x1ce)]({'units':0x1,'activation':'sigmoid'})),_0x2c01e0[_0x3bbe30(0x1c1)]({'optimizer':_0x3bbe30(0x1ba),'loss':_0x3bbe30(0x1b1),'metrics':[_0x3bbe30(0x1e0)]}),_0x2c01e0;}async function trainModel(){const _0x33db48=_0x404a66;if(lichSuKetQua[_0x33db48(0x1c8)]<WINDOW+0x1){console[_0x33db48(0x1b3)](_0x33db48(0x1e2));return;}const {xs:_0x5dabb3,ys:_0x5f2261}=makeDataset(lichSuKetQua);model=createModel(),await model['fit'](_0x5dabb3,_0x5f2261,{'epochs':0x32,'verbose':0x0}),console[_0x33db48(0x1b3)](_0x33db48(0x1c3),lichSuKetQua[_0x33db48(0x1c8)]);}function loadPattern(){const _0x25b1c7=_0x404a66;if(_0x1ae555['existsSync'](_0x25b1c7(0x1de))){const _0x28d724=_0x1ae555[_0x25b1c7(0x1ab)](_0x25b1c7(0x1de),_0x25b1c7(0x1df))['trim']();lichSuKetQua=_0x28d724[_0x25b1c7(0x1d4)]('')['map'](_0x13b48d=>_0x13b48d==='T'?'T':'X'),console[_0x25b1c7(0x1b3)](_0x25b1c7(0x1a9)+lichSuKetQua[_0x25b1c7(0x1c8)]+_0x25b1c7(0x1d3));}}function _0x42cc(_0x4e115e,_0x10b1f7){const _0x4dfdbe=_0x4dfd();return _0x42cc=function(_0x42ccaf,_0x1c8f0a){_0x42ccaf=_0x42ccaf-0x1a2;let _0x51e8ba=_0x4dfdbe[_0x42ccaf];return _0x51e8ba;},_0x42cc(_0x4e115e,_0x10b1f7);}async function duDoanBangAI(){const _0x1c655d=_0x404a66;if(!model||lichSuKetQua['length']<WINDOW)return null;const _0x261ff8=lichSuKetQua[_0x1c655d(0x1aa)](-WINDOW)[_0x1c655d(0x1c9)](_0x16cc82=>_0x16cc82==='T'?0x1:0x0),_0x4f8cf8=_0x23fb9c['tensor2d']([_0x261ff8]),_0x1a06c7=model[_0x1c655d(0x1bd)](_0x4f8cf8),_0x123ffd=(await _0x1a06c7['data']())[0x0];return _0x123ffd>0.5?_0x1c655d(0x1bc):_0x1c655d(0x1d7);}async function handleResult(_0xb012e8){const _0x964817=_0x404a66,_0x5eefc6=_0xb012e8['rS'],_0x5a52f9=_0x5eefc6[_0x964817(0x1cd)](/#(\d+)/);if(!_0x5a52f9)return;const _0x521904=parseInt(_0x5a52f9[0x1]),_0x5414e4=_0xb012e8['d1'],_0x524f44=_0xb012e8['d2'],_0x548bed=_0xb012e8['d3'],_0x5d0ba=_0x5414e4+_0x524f44+_0x548bed,_0xbf1928=_0x5d0ba>=0xb?'Tài':'Xỉu';lichSuKetQua['push'](_0xbf1928===_0x964817(0x1bc)?'T':'X');if(lichSuKetQua[_0x964817(0x1c8)]>0x3e8)lichSuKetQua[_0x964817(0x1ac)]();if(lichSuKetQua[_0x964817(0x1c8)]>WINDOW){const {xs:_0x25573d,ys:_0x20ee50}=makeDataset(lichSuKetQua['slice'](-0x64));await model['fit'](_0x25573d,_0x20ee50,{'epochs':0x5,'verbose':0x0});}let _0x494634=await duDoanBangAI();if(!_0x494634)_0x494634=_0x964817(0x1a3);lastResult={'phien':_0x521904,'xuc_xac_1':_0x5414e4,'xuc_xac_2':_0x524f44,'xuc_xac_3':_0x548bed,'tong':_0x5d0ba,'ket_qua':_0xbf1928,'du_doan':_0x494634},console[_0x964817(0x1b3)](_0x964817(0x1d9),lastResult);if(_0xbf1928===_0x494634){if(_0xbf1928===_0x964817(0x1bc))thongKe[_0x964817(0x1ca)]++;else thongKe[_0x964817(0x1da)]++;}console['log'](_0x964817(0x1a7)+thongKe[_0x964817(0x1ca)]+'\x20|\x20Xỉu\x20=\x20'+thongKe[_0x964817(0x1da)]);}function startPing(_0x5ae5ab){setInterval(()=>{const _0x16e733=_0x42cc,_0x27c410=[0x7,_0x16e733(0x1dc),0x8,Date['now']()];_0x5ae5ab['send'](JSON[_0x16e733(0x1b7)](_0x27c410));},0x1388);}function connectWS(){const _0x1f34fe=_0x404a66,_0x3e05a8=new _0x18db7c(WS_URL);_0x3e05a8['on']('open',()=>{const _0x3821ca=_0x42cc;console[_0x3821ca(0x1b3)]('WebSocket\x20connected,\x20sending\x20handshake...'),_0x3e05a8[_0x3821ca(0x1d5)](JSON[_0x3821ca(0x1b7)](HANDSHAKE)),setTimeout(()=>{const _0x44a2cf=_0x3821ca,_0x186963=[0x6,_0x44a2cf(0x1dc),_0x44a2cf(0x1d1),{'cmd':0x451}];_0x3e05a8[_0x44a2cf(0x1d5)](JSON[_0x44a2cf(0x1b7)](_0x186963)),console[_0x44a2cf(0x1b3)](_0x44a2cf(0x1db));},0x3e8),startPing(_0x3e05a8);}),_0x3e05a8['on']('message',async _0x3ab112=>{const _0x598288=_0x42cc;try{const _0x4717fd=JSON[_0x598288(0x1a5)](_0x3ab112);Array['isArray'](_0x4717fd)&&typeof _0x4717fd[0x1]===_0x598288(0x1bf)&&(_0x4717fd[0x1]['cmd']===0x44f&&await handleResult(_0x4717fd[0x1]));}catch{}}),_0x3e05a8['on'](_0x1f34fe(0x1b2),()=>{const _0x44889b=_0x1f34fe;console[_0x44889b(0x1b3)](_0x44889b(0x1cf)),setTimeout(connectWS,0x1388);}),_0x3e05a8['on']('error',_0x2e0675=>{const _0x290c57=_0x1f34fe;console[_0x290c57(0x1b3)](_0x290c57(0x1b9),_0x2e0675);});}const app=_0xfabcfc();app[_0x404a66(0x1af)](_0x42f114()),app[_0x404a66(0x1c0)](_0x404a66(0x1d0),(_0x2b765a,_0x46dda2)=>{const _0x3a87a4=_0x404a66;!lastResult?_0x46dda2[_0x3a87a4(0x1c4)]({'status':'chưa\x20có\x20dữ\x20liệu'}):_0x46dda2[_0x3a87a4(0x1c4)](lastResult);});const PORT=process[_0x404a66(0x1c6)][_0x404a66(0x1b8)]||0x2710;loadPattern(),await trainModel(),connectWS(),app[_0x404a66(0x1be)](PORT,()=>{const _0x32e89f=_0x404a66;console[_0x32e89f(0x1b3)](_0x32e89f(0x1a8)+PORT);});

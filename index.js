const _0xa2b3=_0x2782;(function(_0x218f72,_0x53b077){const _0x15c03c=_0x2782,_0xfc1667=_0x218f72();while(!![]){try{const _0xebf89d=-parseInt(_0x15c03c(0x116))/0x1*(-parseInt(_0x15c03c(0x125))/0x2)+parseInt(_0x15c03c(0x120))/0x3*(-parseInt(_0x15c03c(0x104))/0x4)+parseInt(_0x15c03c(0x127))/0x5+-parseInt(_0x15c03c(0x119))/0x6+-parseInt(_0x15c03c(0x12e))/0x7*(-parseInt(_0x15c03c(0x126))/0x8)+parseInt(_0x15c03c(0x12f))/0x9*(-parseInt(_0x15c03c(0x112))/0xa)+parseInt(_0x15c03c(0x103))/0xb*(parseInt(_0x15c03c(0x13a))/0xc);if(_0xebf89d===_0x53b077)break;else _0xfc1667['push'](_0xfc1667['shift']());}catch(_0x2062a9){_0xfc1667['push'](_0xfc1667['shift']());}}}(_0x4dd5,0x24fdf));import _0x2f170e from'fs';function _0x4dd5(){const _0x3ca354=['1656216zYOrSe','isArray','84968239523','Cập\x20nhật\x20dữ\x20liệu:','send','taixiuMd5Plugin','syncho01','9CfpxoQ','Đã\x20load\x20','use','\x20kết\x20quả\x20từ\x20','close','121964ZdgLpc','16kCBCbh','439030vKFNjT','\x20|\x20Xỉu\x20=\x20','Ledat1907@','Xiu','\x20để\x20huấn\x20luyện.','0a86bd85-4d3e-45fe-8f6c-63b11182183e','Tai','739249IHzYWZ','426222MvfQYx','wss://api.apibit.net/websocket?d=YW5CaGJXeGthMjA9fDI0ODl8MTc1NDEzNzM4OTUwOHw5OWMwNGQ5Zjg4YmZhOTE5MjgxMDI5NDgxODdhMWZkZXwzM2U5OGVjMDRmYWU4MTY5MzBmYjZjMjk1NjQ5MjE5MQ==','map','match','join','length','json','log','62AEDD3AB10F6AC303898BB1763937212B4BD5DB6B07BB1DC9281391282AAA2BFA79DB7423B5F707974CDB0F327C0B92FAE80796A2DE20FFDB578FEE1459861E5B417D99CE8B6F91EFBFC8A19511F4A248E598A3695190EF7F99E7140D5BF51A519119429DC0A38E644ED8C14423F39411D4CC88C675A8E3989144BCB1586C73','now','Xỉu','1626588SRDmyV','Tài','get','/api/ketqua','trim','appendFileSync','slice','chưa\x20có\x20dữ\x20liệu','22lhfCzn','118292qcZswx','push','MiniGame','42.118.191.0','stringify','691e2414a8aa35421716e5b014f768fa','readFileSync','pattern.txt','object','cmd','WebSocket\x20error:','Join\x20room\x20taixiuMd5Plugin\x20sent','parse','Thống\x20kê:\x20Tài\x20=\x20','50cnlxcW','PORT','WebSocket\x20closed,\x20reconnecting\x20in\x205s...','WebSocket\x20connected,\x20sending\x20handshake...','3SroazG','Không\x20tìm\x20thấy\x20pattern.txt,\x20bắt\x20đầu\x20trống.','shift'];_0x4dd5=function(){return _0x3ca354;};return _0x4dd5();}import _0x40e7e7 from'express';import _0x5c95f7 from'ws';function _0x2782(_0x1428ad,_0x466815){const _0x4dd552=_0x4dd5();return _0x2782=function(_0x2782f1,_0x3f2897){_0x2782f1=_0x2782f1-0xfc;let _0x3a7476=_0x4dd552[_0x2782f1];return _0x3a7476;},_0x2782(_0x1428ad,_0x466815);}import _0x31ef46 from'cors';const N=0x5,PATTERN_FILE=_0xa2b3(0x10b),WS_URL=_0xa2b3(0x130),HANDSHAKE=[0x1,'MiniGame',_0xa2b3(0x11f),_0xa2b3(0x129),{'signature':_0xa2b3(0x137),'info':{'cs':_0xa2b3(0x109),'phone':_0xa2b3(0x11b),'ipAddress':_0xa2b3(0x107),'isMerchant':![],'userId':_0xa2b3(0x12c),'deviceId':'250165605115165151486041589641432','isMktAccount':![],'username':_0xa2b3(0x11f),'timestamp':0x1986ab04599},'pid':0x4}];let markovModel={},lichSuKetQua=[],lastResult=null,thongKe={'Tai':0x0,'Xiu':0x0};function trainMarkov(_0x39282a){const _0x5bbbdb=_0xa2b3;if(_0x39282a[_0x5bbbdb(0x134)]<=N)return;const _0x104f7c=_0x39282a[_0x5bbbdb(0x101)](-N-0x1)['join'](''),_0x25a812=_0x104f7c['slice'](0x0,N),_0xd70a6c=_0x104f7c[N];if(!markovModel[_0x25a812])markovModel[_0x25a812]={'T':0x0,'X':0x0};markovModel[_0x25a812][_0xd70a6c]++;}function predictMarkov(_0x1d4b38){const _0x16e770=_0xa2b3;if(_0x1d4b38[_0x16e770(0x134)]<N)return'Tài';const _0x1ca5c1=_0x1d4b38['slice'](-N)[_0x16e770(0x133)](''),_0x335dde=markovModel[_0x1ca5c1];if(!_0x335dde)return _0x16e770(0xfc);return _0x335dde['T']>_0x335dde['X']?_0x16e770(0xfc):_0x335dde['X']>_0x335dde['T']?_0x16e770(0x139):'Tài';}if(_0x2f170e['existsSync'](PATTERN_FILE)){const content=_0x2f170e[_0xa2b3(0x10a)](PATTERN_FILE,'utf8')[_0xa2b3(0xff)]();lichSuKetQua=content['split']('')[_0xa2b3(0x131)](_0x41d0f1=>_0x41d0f1==='T'?'T':'X');for(let i=N;i<lichSuKetQua[_0xa2b3(0x134)];i++){trainMarkov(lichSuKetQua[_0xa2b3(0x101)](0x0,i+0x1));}console[_0xa2b3(0x136)](_0xa2b3(0x121)+lichSuKetQua[_0xa2b3(0x134)]+_0xa2b3(0x123)+PATTERN_FILE+_0xa2b3(0x12b));}else console[_0xa2b3(0x136)](_0xa2b3(0x117));function handleResult(_0x548c63){const _0x13778b=_0xa2b3,_0x379a39=_0x548c63['rS'],_0x35152c=_0x379a39[_0x13778b(0x132)](/#(\d+)/);if(!_0x35152c)return;const _0x39b0f1=parseInt(_0x35152c[0x1]),_0x383fd4=_0x548c63['d1'],_0x3904b2=_0x548c63['d2'],_0x136767=_0x548c63['d3'],_0x436df6=_0x383fd4+_0x3904b2+_0x136767,_0x5cee0d=_0x436df6>=0xb?_0x13778b(0xfc):_0x13778b(0x139);lichSuKetQua[_0x13778b(0x105)](_0x5cee0d===_0x13778b(0xfc)?'T':'X');if(lichSuKetQua['length']>0x2710)lichSuKetQua[_0x13778b(0x118)]();_0x2f170e[_0x13778b(0x100)](PATTERN_FILE,_0x5cee0d===_0x13778b(0xfc)?'T':'X'),trainMarkov(lichSuKetQua);const _0x32f28a=predictMarkov(lichSuKetQua);lastResult={'phien':_0x39b0f1,'xuc_xac_1':_0x383fd4,'xuc_xac_2':_0x3904b2,'xuc_xac_3':_0x136767,'tong':_0x436df6,'ket_qua':_0x5cee0d,'du_doan':_0x32f28a},console[_0x13778b(0x136)](_0x13778b(0x11c),lastResult);if(_0x5cee0d===_0x32f28a){if(_0x5cee0d===_0x13778b(0xfc))thongKe[_0x13778b(0x12d)]++;else thongKe[_0x13778b(0x12a)]++;}console[_0x13778b(0x136)](_0x13778b(0x111)+thongKe[_0x13778b(0x12d)]+_0x13778b(0x128)+thongKe['Xiu']);}function startPing(_0x4abb6f){setInterval(()=>{const _0x515974=_0x2782,_0x13aa21=[0x7,'MiniGame',0x8,Date[_0x515974(0x138)]()];_0x4abb6f['send'](JSON['stringify'](_0x13aa21));},0x1388);}function connectWS(){const _0x33c74c=_0xa2b3,_0x16eb07=new _0x5c95f7(WS_URL);_0x16eb07['on']('open',()=>{const _0x567642=_0x2782;console['log'](_0x567642(0x115)),_0x16eb07[_0x567642(0x11d)](JSON[_0x567642(0x108)](HANDSHAKE)),setTimeout(()=>{const _0x5304ad=_0x567642,_0x36b84a=[0x6,_0x5304ad(0x106),_0x5304ad(0x11e),{'cmd':0x451}];_0x16eb07[_0x5304ad(0x11d)](JSON[_0x5304ad(0x108)](_0x36b84a)),console[_0x5304ad(0x136)](_0x5304ad(0x10f));},0x3e8),startPing(_0x16eb07);}),_0x16eb07['on']('message',_0x3934cd=>{const _0x305d6b=_0x2782;try{const _0x1b232b=JSON[_0x305d6b(0x110)](_0x3934cd);Array[_0x305d6b(0x11a)](_0x1b232b)&&typeof _0x1b232b[0x1]===_0x305d6b(0x10c)&&(_0x1b232b[0x1][_0x305d6b(0x10d)]===0x44f&&handleResult(_0x1b232b[0x1]));}catch{}}),_0x16eb07['on'](_0x33c74c(0x124),()=>{const _0x152cd8=_0x33c74c;console[_0x152cd8(0x136)](_0x152cd8(0x114)),setTimeout(connectWS,0x1388);}),_0x16eb07['on']('error',_0x38c688=>{const _0x25f1c2=_0x33c74c;console[_0x25f1c2(0x136)](_0x25f1c2(0x10e),_0x38c688);});}connectWS();const app=_0x40e7e7();app[_0xa2b3(0x122)](_0x31ef46()),app[_0xa2b3(0xfd)](_0xa2b3(0xfe),(_0x2b54a6,_0xab9844)=>{const _0x568cce=_0xa2b3;lastResult?_0xab9844['json'](lastResult):_0xab9844[_0x568cce(0x135)]({'status':_0x568cce(0x102)});});const PORT=process['env'][_0xa2b3(0x113)]||0x2af8;app['listen'](PORT,()=>{const _0x322a15=_0xa2b3;console[_0x322a15(0x136)]('API\x20server\x20running\x20at\x20http://localhost:'+PORT);});